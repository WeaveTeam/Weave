/**
 * angular-bootstrap-duallistbox
 * @version v0.0.1 - 2014-03-16
 * @author Francesco Pontillo (francescopontillo@gmail.com)
 * @link https://github.com/frapontillo/angular-bootstrap-duallistbox
 * @license Apache License 2.0
**/

"use strict";angular.module("frapontillo.bootstrap-duallistbox",[]),angular.module("frapontillo.bootstrap-duallistbox").directive("bsDuallistbox",["$compile","$timeout",function(a,b){return{restrict:"A",require:"ngModel",link:function(c,d,e,f){var g,h=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,i=e.ngOptions.match(h)[7],j=function(a){return a===!0||"true"===a},k={bootstrap2:{changeFn:"setBootstrap2Compatible",transformFn:j},postfix:"setHelperSelectNamePostfix",selectMinHeight:{changeFn:"setSelectOrMinimalHeight",defaultValue:100},filter:{changeFn:"setShowFilterInputs",defaultValue:!0,transformFn:j},filterClear:{changeFn:"setFilterTextClear",defaultValue:"show all"},filterPlaceholder:"setFilterPlaceHolder",filterValues:{changeFn:"setFilterOnValues",transformFn:j},moveOnSelect:{changeFn:"setMoveOnSelect",defaultValue:!0,transformFn:j},preserveSelection:"setPreserveSelectionOnMove",moveSelectedLabel:"setMoveSelectedLabel",moveAllLabel:"setMoveAllLabel",removeSelectedLabel:"setRemoveSelectedLabel",removeAllLabel:"setRemoveAllLabel",selectedListLabel:"setSelectedListLabel",nonSelectedListLabel:"setNonSelectedListLabel",infoAll:{changeFn:"setInfoText",defaultValue:"Showing all {0}"},infoFiltered:{changeFn:"setInfoTextFiltered",defaultValue:'<span class="label label-warning">Filtered</span> {0} from {1}'},infoEmpty:{changeFn:"setInfoTextEmpty",defaultValue:"Empty list"}},l=function(a){var b,c,d=k[a],f=e[a];return angular.isObject(d)&&(b=d.defaultValue,c=d.transformFn),f||(f=b),angular.isFunction(c)&&(f=c(f)),f},m=function(a){var b=k[a],c=b;return angular.isObject(b)&&(c=b.changeFn),c},n=function(){f.$formatters.push(o),c.$watch(i,o,!0),c.$watch(e.filterNonSelected,function(){o()}),c.$watch(e.filterSelected,function(){o()}),angular.forEach(k,function(a,b){e.$observe(b,function(){var a=m(b),c=l(b);d.bootstrapDualListbox(a,c,!0)})})},o=function(){b(function(){d.bootstrapDualListbox("refresh")})};b(function(){var b={};angular.forEach(k,function(a,c){var d=l(c);b[c]=d}),g=d.bootstrapDualListbox({bootstrap2Compatible:b.bootstrap2,filterTextClear:b.filterClear,filterPlaceHolder:b.filterPlaceholder,moveSelectedLabel:b.moveSelectedLabel,moveAllLabel:b.moveAllLabel,removeSelectedLabel:b.removeSelectedLabel,removeAllLabel:b.removeAllLabel,moveOnSelect:b.moveOnSelect,preserveSelectionOnMove:b.preserveSelection,selectedListLabel:b.selectedListLabel,nonSelectedListLabel:b.nonSelectedListLabel,helperSelectNamePostfix:b.postfix,selectOrMinimalHeight:b.selectMinHeight,showFilterInputs:b.filter,nonSelectedFilter:"",selectedFilter:"",infoText:b.infoAll,infoTextFiltered:b.infoFiltered,infoTextEmpty:b.infoEmpty,filterOnValues:b.filterValues});var f=d.bootstrapDualListbox("getContainer"),h=f.find(".box1 .filter");h.attr("ng-model",e.filterNonSelected),a(h)(c);var i=f.find(".box2 .filter");i.attr("ng-model",e.filterSelected),a(i)(c),n()}),c.$on("$destroy",function(){d.bootstrapDualListbox("destroy")})}}}]);